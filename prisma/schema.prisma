generator client {
    provider = "prisma-client-js"
}

datasource db {
    provider = "postgresql"
}

model user {
    id                   String   @id @db.VarChar(255)
    name                 String   @db.VarChar(255)
    username             String   @db.VarChar(255)
    email                String   @db.VarChar(255)
    created_at           DateTime @db.Timestamptz(6)
    password             String
    avatar_url           String?  @db.VarChar(500)
    banner_url           String?  @db.VarChar(500)
    verified             Boolean  @default(false)
    verification_type_id String?  @db.VarChar(255)

    // --- Relations ---
    verification_type verification_type? @relation(fields: [verification_type_id], references: [id], onDelete: Cascade, map: "verification_type_id")
    accounts          accounts[]
}

model accounts {
    id           String         @id @db.VarChar(255)
    name         String         @db.VarChar(255)
    currency     String         @db.VarChar(255)
    icon         String?        @db.VarChar(255)
    user_id      String         @db.VarChar(255)
    created_at   DateTime       @db.Timestamptz(6)
    updated_at   DateTime       @db.Timestamptz(6)
    balance      Decimal        @db.Decimal(10, 2)
    user         user           @relation(fields: [user_id], references: [id], onDelete: Cascade, map: "user_id")
    transactions transactions[]
}

model transactions {
    id         String   @id @db.VarChar(255)
    name       String   @db.VarChar(255)
    amount     Decimal  @db.Decimal(10, 2)
    type       String   @db.VarChar(200)
    account_id String   @db.VarChar(255)
    issued_at  DateTime @db.Timestamptz(6)
    accounts   accounts @relation(fields: [account_id], references: [id], onDelete: Cascade, map: "account_id")
}

model verification_type {
    id       String @id @db.VarChar(255)
    type     String @db.VarChar(255)
    icon_url String @db.VarChar(500)
    users    user[]
}
